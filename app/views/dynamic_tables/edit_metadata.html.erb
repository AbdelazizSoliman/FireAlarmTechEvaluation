<h1>Edit Metadata for <%= @column_name %> in <%= @table_name %></h1>

<%= form_with model: @metadata, url: update_metadata_dynamic_tables_path(table_name: @table_name, column_name: @column_name), method: :patch do |f| %>
  <div>
    <%= f.label :feature, "Feature" %>
    <%= f.select :feature, options_for_select(['text', 'number', 'combobox', 'checkboxes', 'checkbox'], @metadata.feature), include_blank: true %>
  </div>

  <div>
    <%= f.label :has_cost, "Has Cost" %>
    <%= f.check_box :has_cost %>
  </div>

  <div>
    <%= f.label "options[values]", "Combobox/Checkbox Values (comma-separated)" %>
    <%= f.text_field :options, value: @metadata.options&.dig(:values)&.join(', '), name: 'column_metadata[options][values]' %>
  </div>

  <!-- Add more fields as needed for sub_field, rate_key, etc. -->
  <div>
    <%= f.submit "Save Metadata" %>
  </div>
<% end %>

<%= link_to 'Back', admin_path(table_name: @table_name) %>