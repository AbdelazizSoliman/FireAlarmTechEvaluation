<h1>Edit Metadata for <%= @column_name %> in <%= @table_name.humanize %></h1>

<%= form_with model: @metadata,
              url: update_metadata_dynamic_tables_path(
                     table_name:    @table_name,
                     column_name:   @column_name
                   ),
              method: :patch do |f| %>

  <div>
    <%= f.label :feature, "Feature" %>
    <%= f.select :feature,
          options_for_select(
            ['text','number','combobox','checkboxes','checkbox'],
            @metadata.feature
          ),
          include_blank: true %>
  </div>

  <div>
    <%= f.label :has_cost, "Has Cost" %>
    <%= f.check_box :has_cost %>
  </div>

  <!-- NEW: Standard Value & Tolerance -->
  <div>
    <%= f.label :standard_value, "Standard Value" %>
    <%= f.number_field :standard_value, step: :any %>
  </div>

  <div>
    <%= f.label :tolerance, "Tolerance (%)" %>
    <%= f.number_field :tolerance, step: :any %>
  </div>

  <div>
    <%= f.label "options[values]", "Combobox/Checkbox Values (comma-separated)" %>
    <%= f.text_field :options,
          value: @metadata.options&.dig("values")&.join(','),
          name: 'column_metadata[options][values]' %>
  </div>

  <!-- (additional metadata fields here if you needâ€¦) -->

  <div class="mt-4">
    <%= f.submit "Save Metadata", class: "btn btn-primary" %>
    <%= link_to "Back", admin_path(table_name: @table_name,
                                   project_filter:       params[:project_filter],
                                   project_scope_filter: params[:project_scope_filter],
                                   system_filter:        params[:system_filter],
                                   subsystem_filter:     params[:subsystem_filter]),
                    class: "ml-4 text-gray-600 hover:underline" %>
  </div>
<% end %>
<br/>

<%= link_to 'â† Back to Admin',
    admin_path(
      project_filter:       params[:project_filter],
      project_scope_filter: params[:project_scope_filter],
      system_filter:        params[:system_filter],
      subsystem_filter:     params[:subsystem_filter],
      table_name:           @table_name
    ),
    class: "text-gray-600 hover:underline" %>