<%= form_with url: approve_supplier_notification_path(@notification), method: :post, local: true do |form| %>
  <!-- Membership Type -->
  <div class="mb-4">
    <h2 class="font-semibold">Membership Type</h2>
    <%= form.radio_button :membership_type, "gold", id: "gold" %>
    <%= form.label :membership_type_gold, "Gold", class: "ml-2" %>
    <%= form.radio_button :membership_type, "silver", id: "silver" %>
    <%= form.label :membership_type_silver, "Silver", class: "ml-2" %>
  </div>

  <!-- Projects List for Gold -->
  <div id="gold-membership" class="hidden mb-4">
    <h2 class="font-semibold">Select Projects</h2>
    <% @projects.each do |project| %>
      <%= form.check_box :project_ids, { multiple: true }, project.id, nil %>
      <%= label_tag "project_#{project.id}", project.name, class: "ml-2" %><br>
    <% end %>
  </div>

  <!-- Subsystems List for Silver -->
  <div id="silver-membership" class="hidden mb-4">
    <h2 class="font-semibold">Select Subsystems</h2>
    <% @subsystems.each do |subsystem| %>
      <%= form.check_box :subsystem_ids, { multiple: true }, subsystem.id, nil %>
      <%= label_tag "subsystem_#{subsystem.id}", subsystem.name, class: "ml-2" %><br>
    <% end %>
  </div>

  <!-- Receive Evaluation Report -->
  <div class="mb-4">
    <h2 class="font-semibold">Receive Evaluation Report?</h2>
    <%= form.radio_button :receive_evaluation_report, "true", id: "receive_true" %>
    <%= form.label :receive_evaluation_report_true, "Yes", class: "ml-2" %>
    <%= form.radio_button :receive_evaluation_report, "false", id: "receive_false" %>
    <%= form.label :receive_evaluation_report_false, "No", class: "ml-2" %>
  </div>

  <!-- Hidden field for supplier_id -->
  <%= form.hidden_field :supplier_id, value: @supplier.id %>

  <!-- Approve Supplier Button -->
  <div class="flex items-center space-x-4">
    <%= form.submit "Approve Supplier", class: "bg-blue-500 hover:bg-blue-700 text-white px-4 py-2 rounded" %>
  </div>
<% end %>

<!-- Reject Supplier Button -->
<%= button_to "Reject Supplier", reject_supplier_notification_path(@notification, supplier_id: @supplier.id), method: :post, data: { turbo: false }, class: "bg-red-500 hover:bg-red-700 text-white px-4 py-2 rounded mt-4" %>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const goldRadio = document.getElementById("gold");
    const silverRadio = document.getElementById("silver");
    const goldSection = document.getElementById("gold-membership");
    const silverSection = document.getElementById("silver-membership");

    function toggleMembershipSections() {
      if (goldRadio.checked) {
        goldSection.classList.remove("hidden");
        silverSection.classList.add("hidden");
      } else if (silverRadio.checked) {
        silverSection.classList.remove("hidden");
        goldSection.classList.add("hidden");
      } else {
        goldSection.classList.add("hidden");
        silverSection.classList.add("hidden");
      }
    }

    // Add event listeners to radio buttons
    goldRadio.addEventListener("change", toggleMembershipSections);
    silverRadio.addEventListener("change", toggleMembershipSections);

    // Trigger the function on page load to set the initial state
    toggleMembershipSections();
  });
</script>