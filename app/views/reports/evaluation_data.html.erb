<!-- app/views/reports/evaluation_data.html.erb -->
<h1>Evaluation Data for <%= @supplier.supplier_name %> â€” <%= @subsystem.name %></h1>

<% @data_by_table.each do |table_name, attrs| %>
  <section class="mb-8">
    <h2 class="text-xl font-bold"><%= table_name.titleize %></h2>
    <% if attrs.any? %>
      <table class="w-full border">
        <thead class="bg-gray-200"><tr><th>Attribute</th><th>Value</th></tr></thead>
        <tbody>
          <% attrs.each do |col, val| %>
            <tr class="border-t">
              <td class="px-2 py-1"><%= col.humanize %></td>
              <td class="px-2 py-1">
                <% if val.is_a?(Array) %>
                  <ul class="list-disc ml-4"><% val.each { |v| %><li><%= v %></li><% } %></ul>
                <% else %>
                  <%= val %>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <p class="italic">No data submitted.</p>
    <% end %>
  </section>
<% end %>

<%= link_to "Download Excel", reports_download_excel_path(
      supplier_id:  @supplier.id,
      subsystem_id: @subsystem.id
    ),
    class: "btn btn-primary", data: { turbo: false } %>
