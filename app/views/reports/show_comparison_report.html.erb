<h1 class="text-2xl font-bold mb-4">Comparison Report</h1>

<% @comparison_data.each do |section_name, attributes_hash| %>
  <h2 class="mt-6 mb-2 text-xl font-semibold"><%= section_name %></h2>

  <table class="min-w-full border bg-white">
    <thead class="bg-gray-200">
      <tr>
        <th class="border px-4 py-2">Attribute</th>
        <% # Gather unique supplier names for the header
           suppliers = attributes_hash.values.flat_map(&:keys).uniq %>
        <% suppliers.each do |supplier_name| %>
          <th class="border px-4 py-2"><%= supplier_name %></th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% attributes_hash.each do |attr, supplier_values| %>
        <tr>
          <td class="border px-4 py-2 font-semibold"><%= attr %></td>
          <% suppliers.each do |supplier_name| %>
            <td class="border px-4 py-2">
              <%= supplier_values[supplier_name] || 'N/A' %>
            </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
